<div class='arrears-pre-period-view'>
  <form nz-form [formGroup]="form">
    <div nz-row [nzGutter]='[20,15]'>
      <div nz-col [nzXs]="12" [nzLg]="12">
        <hbt-input-text formControlName='keySearch'
                        [maxLength]='255'
                        labelText="{{'icn.icnContribution.calculate.search.keySearch' | translate}}"
                        placeholderText="{{'icn.icnContribution.calculate.search.keySearch' | translate}}"></hbt-input-text>
      </div>
      <div nz-col [nzXs]="24" [nzLg]="12">
        <hbt-select-check-able [urlLoadData]="getUrlCategory(categoryCode.ICN_LOAI_DS_TRICH_NOP)"
                               [serviceName]="microService.ADMIN"
                               keyLabel="name"
                               keyValue="code"
                               formControlName="listType"
                               placeholder="{{'icn.icnContribution.calculate.search.type' | translate}}"
                               labelText="{{'icn.icnContribution.calculate.search.type' | translate}}"
        ></hbt-select-check-able>
      </div>
      <div nz-col [nzXs]="12" [nzLg]="12">
        <hbt-date-picker
          mode="month"
          placeholderText="{{'icn.icnContribution.calculate.arrearsPrePeriod.fromPeriodDate' | translate}}"
          labelText="{{'icn.icnContribution.calculate.arrearsPrePeriod.fromPeriodDate' | translate}}"
          formControlName="fromPeriodDate"></hbt-date-picker>
      </div>

      <div nz-col [nzXs]="12" [nzLg]="12">
        <hbt-date-picker
          mode="month"
          placeholderText="{{'icn.icnContribution.calculate.arrearsPrePeriod.toPeriodDate' | translate}}"
          labelText="{{'icn.icnContribution.calculate.arrearsPrePeriod.toPeriodDate' | translate}}"
          formControlName="toPeriodDate"
          [type]="((isSubmitted && form.controls['toPeriodDate'].errors) || form.errors?.rangeDateError) ? 'error' : 'default'"
          [showError]="((isSubmitted && form.controls['toPeriodDate'].errors) || form.errors?.rangeDateError) !== null"
          [errors]="form.errors?.rangeDateError ? form.errors : form.controls['toPeriodDate'].errors"
          [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'icn.icnContribution.calculate.arrearsPrePeriod.toPeriodDate' | translate }},
      { errorName: 'rangeDateError', errorDescription: 'common.validate.rangeDate.pareDate' | translate:
        {'fromDate': 'icn.icnContribution.calculate.arrearsPrePeriod.fromPeriodDate' | translate, 'toDate': 'icn.icnContribution.calculate.arrearsPrePeriod.toPeriodDate' | translate}}
    ]"></hbt-date-picker>
      </div>
      <div nz-col [nzXs]="24" [nzLg]="24" style="text-align: center">
        <hbt-button
          class="staff__research__btn__search"
          buttonAvailableStyle="SEARCH"
          buttonText="{{'common.button.search' | translate}}"
          (click)="search()"
        ></hbt-button>
      </div>
    </div>
    <div class='search__content--group'>
      <hbt-table-wrap>
        <div style="margin-bottom: 10px">
          <hbt-button
            buttonAvailableStyle="ADD"
            buttonText="{{'icn.icnContribution.calculate.action.selectAll' | translate}}"
            *ngIf="selectionIds.length == 0"
            [isDisable]='form.invalid'
            (click)="onSelectAll()"
          ></hbt-button>
          <hbt-button
            buttonAvailableStyle="ADD"
            buttonText="{{'icn.icnContribution.calculate.action.select' | translate}}"
            *ngIf="selectionIds.length > 0"
            [isDisable]='form.invalid'
            (click)="onSelect()"
          ></hbt-button>
        </div>
        <hbt-table [showExtra]="false"
                   (changePageNum)="search($event)"
                   [tableConfig]="tableConfig" [dataList]="tableData"
                   (amountSelectedRowsChange)="selectionIds = $event"
        ></hbt-table>
      </hbt-table-wrap>
    </div>
  </form>
</div>