<form nz-form [formGroup]="form" class="iss-index">
  <div class="lms">
    <div class="search__custom-common remove__mr__bt-40 ">
      <div nz-row class="button__action-left">
        <hbt-button
          buttonSize="LARGE"
          buttonAvailableStyle="ADD"
          buttonText="{{'common.button.add' | translate}}"
          (click)="doOpenForm(Mode.ADD)"
        ></hbt-button>
      </div>

      <div class="search__page-right">

        <hbt-date-picker
          style="padding-right: 20px"
          mode="month"
          format="MM/YYYY"
          placeholderText="{{'icn.contributionRates.label.startDate' | translate}}"
          [type]="(form.controls['startDate']?.errors || form.errors?.rangeDateError) ? 'error' : 'default'"
          [showError]="(form.controls['startDate']?.errors || form.errors?.rangeDateError) !== null"
          [errors]="form.errors?.rangeDateError ? form.errors : form.controls['startDate']?.errors"
          [errorDefs]="[{ errorName: 'rangeDateError', errorDescription: 'common.validate.rangeDate.pareDate' | translate:
      {'fromDate': 'icn.contributionRates.label.startDate' | translate, 'toDate': 'icn.contributionRates.label.endDate' | translate}},]"
          formControlName="startDate"></hbt-date-picker>

        <hbt-date-picker
          style="padding-right: 20px"
          mode="month"
          format="MM/YYYY"
          placeholderText="{{'icn.contributionRates.label.endDate' | translate}}"
          formControlName="endDate"></hbt-date-picker>

        <hbt-select-check-able
          style="width: 20%;"
          formControlName='listEmpTypeCode'
          [urlLoadData]="urlConstantShare.GET_EMP_TYPE"
          [serviceName]="microService.HRM"
          keyLabel="name"
          keyValue="code"
          placeholder="{{'icn.contributionRates.label.empTypeCode' | translate}}">

        </hbt-select-check-able>

      </div>
    </div>

    <div class="search__content--group">
      <hbt-table-wrap>
        <div>
          <p *ngIf="listId.length > 0" style="margin: 0">
            {{ 'common.label.selected' | translate }} : {{ listId.length }}
          </p>
        </div>
        <hbt-table
          (changePageNum)="search($event)"
          [tableConfig]="tableConfig"
          [dataList]="tableData"
          (amountSelectedRowsChange)="listId = $event"
        ></hbt-table>
      </hbt-table-wrap>
      <ng-template #usedTimeTmpl let-data="data">
        <div>
          {{ data.startDate }}
          <ng-container *ngIf="data.endDate"> - {{ data.endDate }}</ng-container>
        </div>
      </ng-template>
    </div>

    <ng-template #actionTmpl let-data="data">
      <btn-more-action [model]="[data]" [setting]="actionSchema">
      </btn-more-action>
    </ng-template>

    <ng-template #footerTmpl>
      <hbt-button
        buttonAvailableStyle="CANCEL"
        buttonText="{{ 'common.button.cancel' | translate }}"
        (click)="modalRef.destroy()">
      </hbt-button>
      <hbt-button
        buttonAvailableStyle="SAVE"
        buttonText="{{ 'common.button.saveS' | translate }}"
        (click)="modalRef.getContentComponent().save()">
      </hbt-button>
    </ng-template>

    <hbt-import-file
      [showContent]="isImportData"
      (onCloseModal)="doCloseImport($event)"
      [importApi]="importApi"
      [downLoadTemplateApi]="downLoadTemplateApi"
      [fileTemplateName]="fileTemplateName"
      [doDownloadFileByNameApi]="doDownloadFileByNameApi"
    >
    </hbt-import-file>

    <reject-common-template
      [isReject]="isReject"
      [listRejectId]="listId"
      [rejectId]="rejectId"
      [rejectByListApi]="rejectByListApi"
      (onCloseModal)="doCloseReject($event)"
    >
    </reject-common-template>

    <ng-template #attachFileTmpl let-attachFileList="attachFileList">
      <div *ngFor="let file of attachFileList">
        <a class="attach-file" (click)="doDownLoadFile(file); $event.stopPropagation()">{{ file.fileName }}</a>
      </div>
    </ng-template>
  </div>
</form>

