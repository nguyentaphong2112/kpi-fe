<form nz-form [formGroup]="form" class="als-index">
  <div class="search__custom-common {{isShowAdvSearch ? 'add__mr__bt-10' : 'remove__mr__bt-40'}}">
    <div nz-row class="button__action-left">
      <hbt-button
        class="staff__research__btn__search"
        buttonSize="LARGE"
        buttonAvailableStyle="ADD"
        style="margin-right: 20px"
        buttonText="{{'abs.table.action.makeList' | translate}}"
        nz-popconfirm
        nzCancelText="{{'abs.table.action.cancel' | translate}}" nzOkType="primary"
        nzPopconfirmTitle="{{'abs.label.timekeepingAutoConfirm' | translate }}"
        nzPopconfirmPlacement="left"
        nzOkText="{{'abs.table.action.yes' | translate}}"
        (nzOnConfirm)="calculateAnnualLeave()"
        *ngIf="objFunction?.create"
      ></hbt-button>
      <hbt-button
        style="margin-left: 20px"
        buttonSize="MEDIUM"
        buttonType="BORDER"
        (click)="export()">
        <img src="/assets/icon/staff-manager/export_excel.svg" alt="" />
      </hbt-button>
    </div>

    <div class="search__page-right">
      <!--NÄƒm-->
        <hbt-date-picker formControlName="year"
                         mode="year"
                         format="yyyy"
                         style="padding-right: 20px"
                         [type]="isSubmitted && form.controls['year'].errors ? 'error' : 'default'"
                         [showError]="isSubmitted && form.controls['year'].errors != null"
                         [errors]="form.controls['year'].errors"
                         [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'abs.annualLeaves.table.year' | translate}}]"
                         placeholderText="{{'abs.annualLeaves.table.year' | translate}}"
        ></hbt-date-picker>
      <hbt-input-text formControlName='keySearch'
                      [maxLength]='255'
                      placeholderText="{{'abs.annualLeaves.label.keySearch' | translate}}"></hbt-input-text>
      <hbt-button
        buttonIconType="AWESOME"
        [prefixIcon]="isShowAdvSearch ? 'fa fa-angle-double-up' : 'fa fa-angle-double-down'"
        buttonSize="VERY_LARGE"
        [buttonTextColor]="_variable.$neutral_100"
        [buttonBorderColor]="_variable.$purple_800"
        [buttonBgColor]="_variable.$purple_800"
        (click)="isShowAdvSearch = !isShowAdvSearch"
      >
      </hbt-button>
    </div>
  </div>
  <div *ngIf="isShowAdvSearch" class="content__item content__item--border bg__content--default">
    <div class="form-search">
      <div nz-row [nzGutter]='[20,15]'>
        <div nz-col [nzXs]="12" [nzLg]="6">
          <employee-data-picker [isExpand]="true"
                                [scope]="scope"
                                labelText="{{'abs.annualLeaves.table.employee' | translate}}"
                                placeholder="{{'abs.annualLeaves.table.employee' | translate}}"
                                formControlName="employeeId"
                                [functionCode]="functionCodeEmployee"></employee-data-picker>
        </div>
        <div nz-col [nzXs]="12" [nzLg]="6">
          <hbt-date-picker
            formControlName="startDate"
            placeholderText="{{'abs.annualLeaves.table.startDate' | translate}}"
            labelText="{{'abs.annualLeaves.table.startDate' | translate}}"
          ></hbt-date-picker>
        </div>
        <div nz-col [nzXs]="12" [nzLg]="6">
          <hbt-date-picker
            formControlName="endDate"
            placeholderText="{{'abs.annualLeaves.table.endDate' | translate}}"
            labelText="{{'abs.annualLeaves.table.endDate' | translate}} "
          ></hbt-date-picker>
        </div>
        <div nz-col [nzXs]="24" [nzLg]="24" style="text-align: center">
          <hbt-button
            class="staff__research__btn__search"
            buttonAvailableStyle="SEARCH"
            buttonText="{{'common.button.search' | translate}}"
            (click)="search()"
          ></hbt-button>
        </div>
      </div>
    </div>
  </div>
  <div class='search__content--group' [ngClass]="{'search__content--group-hidden-header': isShowAdvSearch}">
    <hbt-table-wrap>
      <hbt-table
        (changePageNum)="search($event)"
        [tableConfig]="tableConfig" [dataList]="tableData"></hbt-table>
    </hbt-table-wrap>
  </div>


  <ng-template #actionTmpl let-data="data">
    <em class="menu__item--btn" nz-icon nzType="eye"
        nzTooltipTitle="{{'common.title.view' | translate}}" (click)="doOpenFormDetail(data)"
        nzTooltipPlacement="left" nz-button nz-tooltip></em>
  </ng-template>
</form>
