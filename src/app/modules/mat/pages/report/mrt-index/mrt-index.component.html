<form nz-form [formGroup]="form" class="iss-index">
  <div class="lms">
    <div class="content__item content__item--border bg__content--default">
      <div class="form-search">
        <div nz-row [nzGutter]='[20,15]'>

          <div nz-col [nzXs]="24" [nzLg]="6">
            <hbt-select
              keyLabel="name"
              formControlName="type"
              [serviceName]="microService.ADMIN"
              [urlLoadData]="getUrlCategory(categoryCode.MAT_REPORT_TYPE)"
              placeholder="{{'mat.matReport.table.type' | translate}}"
              labelText="{{'mat.matReport.table.type' | translate}} <span class='label__required'>*</span>"
              [type]="isSubmitted && form.controls['type'].errors ? 'error' : 'default'"
              [showError]="isSubmitted && form.controls['type'].errors != null"
              [errors]="form.controls['type'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.type' | translate }}]"
              (eventEmit)="changeReportType()"
            >
            </hbt-select>
          </div>

          <!--Phòng ban quản lý-->
          <div nz-col [nzXs]="24" [nzLg]="6" *ngIf="form.controls['type'].value === 'EQUIPMENT-DEPARTMENT-STOCK-REPORT'">
            <tree-data-picker
              [isExpand]="true"
              placeholder="{{'mat.matReport.table.departmentId' | translate}}"
              labelText="{{'mat.matReport.table.departmentId' | translate}}"
              formControlName="departmentId"
              [functionCode]="functionCode"
              [scope]="scope"
              [type]="isSubmitted && form.controls['departmentId'].errors ? 'error' : 'default'"
              [showError]="isSubmitted && form.controls['departmentId'].errors != null"
              [errors]="form.controls['departmentId'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.departmentId' | translate }}]">
            </tree-data-picker>
          </div>

          <div nz-col [nzXs]="24" [nzLg]="6">
            <hbt-select
              formControlName="warehouseId"
              [serviceName]="serviceName"
              urlLoadData="/warehouses"
              keyValue="warehouseId"
              keyLabel="name"
              placeholder="{{'mat.matReport.table.warehouseId' | translate}}"
              labelText="{{'mat.matReport.table.warehouseId' | translate}}"
              [type]="isSubmitted && form.controls['warehouseId'].errors ? 'error' : 'default'"
              [showError]="isSubmitted && form.controls['warehouseId'].errors != null"
              [errors]="form.controls['warehouseId'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.warehouseId' | translate }}]"
            >
            </hbt-select>
          </div>

          <ng-container *ngIf="form.controls['type'].value === 'EQUIPMENT-DETAIL-STOCK-REPORT'">
            <div nz-col [nzXs]="24" [nzLg]="6">
              <hbt-select
                formControlName="equipmentTypeId"
                [serviceName]="microService.ADMIN"
                [urlLoadData]="getUrlCategory(categoryCode.EQUIPMENT_TYPE)"
                keyLabel="name"
                placeholder="{{'mat.matReport.table.equipmentTypeId' | translate}}"
                labelText="{{'mat.matReport.table.equipmentTypeId' | translate}}"
                [type]="isSubmitted && form.controls['equipmentTypeId'].errors ? 'error' : 'default'"
                [showError]="isSubmitted && form.controls['equipmentTypeId'].errors != null"
                [errors]="form.controls['equipmentTypeId'].errors"
                [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.equipmentTypeId' | translate }}]"
              >
              </hbt-select>
            </div>


            <div nz-col [nzXs]="24" [nzLg]="6">
              <hbt-select
                [disable]="!form.controls['equipmentTypeId'].value"
                formControlName="equipmentId"
                [serviceName]="serviceName"
                urlLoadData="/equipments/list-by-type"
                [inputParam]="{equipmentTypeId: form.controls['equipmentTypeId'].value}"
                [isRequiredInputParam]="true"
                keyValue="equipmentId"
                keyLabel="name"
                placeholder="{{'mat.matReport.table.equipmentId' | translate}}"
                labelText="{{'mat.matReport.table.equipmentId' | translate}}"
                [type]="isSubmitted && form.controls['equipmentId'].errors ? 'error' : 'default'"
                [showError]="isSubmitted && form.controls['equipmentId'].errors != null"
                [errors]="form.controls['equipmentId'].errors"
                [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.equipmentId' | translate }}]"
              >
              </hbt-select>
            </div>
          </ng-container>

          <!--Thời gian áp dụng từ ngày-->
          <div nz-col  [nzXs]="24" [nzLg]="6">
            <hbt-date-picker
              placeholderText="{{'mat.matReport.table.fromDate' | translate}}"
              labelText="{{'mat.matReport.table.fromDate' | translate}} <span class='label__required'>*</span>"
              [type]="isSubmitted && (form.errors || form.controls['fromDate'].errors) ? 'error' : 'default'"
              [showError]="isSubmitted && (form.errors || form.controls['fromDate'].errors ) != null"
              [errors]="form.errors?.rangeDateError ? form.errors : form.controls['fromDate'].errors"
              [errorDefs]="[{ errorName: 'rangeDateError', errorDescription: 'mat.validate.rangeDate.pareDate' | translate:
            {'fromDate': 'mat.matReport.table.fromDate' | translate, 'toDate': 'mat.matReport.table.toDate' | translate}},
               { errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.fromDate' | translate }}]"
              formControlName="fromDate"></hbt-date-picker>
          </div>

          <!--Thời gian áp dụng đến ngày-->
          <div nz-col  [nzXs]="24" [nzLg]="6">
            <hbt-date-picker
              placeholderText="{{'mat.matReport.table.toDate' | translate}}"
              labelText="{{'mat.matReport.table.toDate' | translate}} <span class='label__required'>*</span>"
              formControlName="toDate"
              [type]="isSubmitted && form.controls['toDate'].errors ? 'error' : 'default'"
              [showError]="isSubmitted && form.controls['toDate'].errors != null"
              [errors]="form.controls['toDate'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'mat.matReport.table.toDate' | translate }}]">
            ></hbt-date-picker>
          </div>
          <div nz-col [nzXs]="24" [nzLg]="24" style="text-align: center">
            <hbt-button
              class="staff__research__btn__search"
              buttonSize="LARGE"
              buttonAvailableStyle="SEARCH"
              buttonText="{{'common.button.export' | translate}}"
              (click)="export()"
            ></hbt-button>
          </div>
        </div>
      </div>
    </div>

  </div>
</form>