<div [ngClass]="{'app-card' : isPage}">
  <div class="content" *ngIf="isPage">
    <hbt-button buttonType="NO_BORDER" (click)="save()" buttonAvailableStyle="SAVE"
                buttonText="{{'common.button.save' | translate}}" type='SUBMIT'></hbt-button>
  </div>
  <form nz-form [formGroup]="form">
    <div class="app-row" nz-row [nzGutter]='[20,15]'>
      <div nz-col nzXs="24" nzLg="12">
        <hbt-input-text formControlName="configGroup" [maxLength]="255"
                        [type]="isSubmitted && form.controls['configGroup'].errors ? 'error' : 'default'"
                        [showError]="isSubmitted && form.controls['configGroup'].errors !== null"
                        [errors]="form.controls['configGroup'].errors"
                        [errorDefs]="[{ errorName: 'maxlength', errorDescription: 'common.validate.maxLength' | translate: {'numberLength': '255' }},
           { errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.parameters.label.configGroup' | translate }}]"
                        placeholderText="{{ 'admin.configurations.parameters.label.configGroup' | translate }}"
                        labelText="{{ 'admin.configurations.parameters.label.configGroup' | translate }} <span class='label__required'>*</span>">
        </hbt-input-text>
      </div>
      <div nz-col nzXs="24" nzLg="12">
        <hbt-input-text formControlName="configGroupName" [maxLength]="255"
                        [type]="isSubmitted && form.controls['configGroupName'].errors ? 'error' : 'default'"
                        [showError]="isSubmitted && form.controls['configGroupName'].errors !== null"
                        [errors]="form.controls['configGroupName'].errors"
                        [errorDefs]="[{ errorName: 'maxlength', errorDescription: 'common.validate.maxLength' | translate: {'numberLength': '255' }},
           { errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.parameters.label.configGroupName' | translate }}]"
                        placeholderText="{{ 'admin.configurations.parameters.label.configGroupName' | translate }}"
                        labelText="{{ 'admin.configurations.parameters.label.configGroupName' | translate }} <span class='label__required'>*</span>">
        </hbt-input-text>
      </div>
      <div nz-col nzXs="24" nzLg="12">
        <hbt-select formControlName="configPeriodType"
                    [dataSelects]="listPeriodType"
                    [type]="isSubmitted && form.controls['configPeriodType'].errors ? 'error' : 'default'"
                    [showError]="isSubmitted && form.controls['configPeriodType'].errors !== null"
                    [errors]="form.controls['configPeriodType'].errors"
                    [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.parameters.label.configPeriodType' | translate }}]"
                    labelText="{{'admin.configurations.parameters.label.configPeriodType' | translate}} <span class='label__required'>*</span>"
                    placeholder="{{'admin.configurations.parameters.label.configPeriodType' | translate}}"
        >
        </hbt-select>
      </div>
      <div nz-col nzXs="24" nzLg="24">
        <nz-table
          nzBordered
          [nzData]="[1]"
          [nzShowPagination]="false"
        >
          <thead>
          <tr>
            <th nzWidth='17.5%'>{{ 'admin.configurations.attributes.table.dataCode' | translate }} <span
              class='label__required'>*</span></th>
            <th nzWidth='17.5%'>{{ 'admin.configurations.attributes.table.dataName' | translate }} <span
              class='label__required'>*</span></th>
            <th nzWidth='17.5%'>{{ 'admin.configurations.attributes.table.dataType' | translate }} <span
              class='label__required'>*</span></th>
            <th nzWidth='17.5%'>{{ 'admin.configurations.attributes.table.isRequired' | translate }} <span
              class='label__required'>*</span></th>
            <th nzWidth='17.5%'>{{ 'admin.configurations.attributes.table.urlLoadData' | translate }}
            </th>
            <th nzWidth='12.5%'></th>
          </tr>
          </thead>
          <tbody>
          <ng-container [formArrayName]="FORM_ARRAY_NAME">
            <ng-container *ngFor="let attribute of columns.controls; let i = index" [formGroupName]="i">
              <tr>
                <td>
                  <hbt-input-text formControlName="configCode" [maxLength]="255"
                                  [type]="isSubmitted && attribute.get('configCode')?.errors ? 'error' : 'default'"
                                  [showError]="isSubmitted && attribute.get('configCode')?.errors !== null"
                                  [errors]="attribute.get('configCode')?.errors"
                                  [errorDefs]="[{ errorName: 'maxlength', errorDescription: 'common.validate.maxLength' | translate: {'numberLength': '255' }},
           { errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.attributes.table.dataCode' | translate }}]"
                                  placeholderText="{{'admin.configurations.attributes.table.dataCode' | translate}}">

                  </hbt-input-text>
                </td>
                <td>
                  <hbt-input-text formControlName="configName" [maxLength]="255"
                                  [type]="isSubmitted && attribute.get('configName')?.errors ? 'error' : 'default'"
                                  [showError]="isSubmitted && attribute.get('configName')?.errors !== null"
                                  [errors]="attribute.get('configName')?.errors"
                                  [errorDefs]="[{ errorName: 'maxlength', errorDescription: 'common.validate.maxLength' | translate: {'numberLength': '255' }},
           { errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.attributes.table.dataName' | translate }}]"
                                  placeholderText="{{'admin.configurations.attributes.table.dataName' | translate}}">

                  </hbt-input-text>
                </td>
                <td>
                  <hbt-select formControlName="dataType"
                              (ngModelChange)="changeType(attribute)"
                              [dataSelects]="listType"
                              [type]="isSubmitted && attribute.get('dataType')?.errors ? 'error' : 'default'"
                              [showError]="isSubmitted && attribute.get('dataType')?.errors !== null"
                              [errors]="attribute.get('dataType')?.errors"
                              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.attributes.table.dataType' | translate }}]"
                              placeholder="{{'admin.configurations.attributes.table.dataType' | translate}}"
                  >
                  </hbt-select>
                </td>
                <td>
                  <hbt-select formControlName="required"
                              [dataSelects]="listRequired"
                              [type]="isSubmitted && attribute.get('required')?.errors ? 'error' : 'default'"
                              [showError]="isSubmitted && attribute.get('required')?.errors !== null"
                              [errors]="attribute.get('required')?.errors"
                              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.attributes.table.isRequired' | translate }}]"
                              placeholder="{{'admin.configurations.attributes.table.isRequired' | translate}}"
                  >
                  </hbt-select>
                </td>
                <td>
                  <hbt-input-text formControlName="urlLoadData" [maxLength]="255"
                                  [defaultInput]="true"
                                  [type]="isSubmitted && attribute.get('urlLoadData')?.errors ? 'error' : 'default'"
                                  [showError]="isSubmitted && attribute.get('urlLoadData')?.errors !== null"
                                  [errors]="attribute.get('urlLoadData')?.errors"
                                  [errorDefs]="[
           { errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'admin.configurations.attributes.table.urlLoadData' | translate }},
           {errorName: 'duplicate', errorDescription: 'common.validate.duplicate' | translate: {'param': 'admin.configurations.attributes.table.urlLoadData' | translate}}]"
                                  placeholderText="{{'admin.configurations.attributes.table.urlLoadData' | translate}}">

                  </hbt-input-text>
                </td>
                <td class="text-center">
                  <div>
                    <em *ngIf="i != 0" class="menu__item--btn1" nz-icon nzType="arrow-up" nz-button (click)="swapUp(i)"
                        nz-tooltip></em>
                    <em *ngIf="i != columns.length - 1" class="menu__item--btn1" nz-icon nzType="arrow-down"
                        nz-button nz-tooltip (click)="swapDown(i)"></em>
                  </div>
                  <em class="menu__item--btn1" nz-icon nzType="plus-circle" nzTheme="outline"
                      nzTooltipTitle="{{'common.title.add' | translate}}" (click)="addNewAttributes(i + 1)"
                      nzTooltipPlacement="left" nz-button nz-tooltip></em>
                  <em class="menu__item--btn" nz-icon nzType="delete" nzTheme="outline"
                      nzTooltipTitle="{{'common.title.delete' | translate}}"
                      nzTooltipPlacement="right" nz-button nz-tooltip (click)="onDeleteAttributesClick(i)"></em></td>
              </tr>
            </ng-container>
          </ng-container>
          </tbody>
        </nz-table>
      </div>
    </div>
  </form>
</div>
