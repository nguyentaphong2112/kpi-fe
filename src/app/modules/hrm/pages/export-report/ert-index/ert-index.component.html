<div class="ert-index">
  <div class="content__item content__item--border bg__content--default">
    <div class="form-search">
      <form nz-form [formGroup]="form">
        <div class="app-row" nz-row [nzGutter]='[20,15]'>
          <div nz-col nzXs="24" nzLg="8">
            <hbt-select formControlName="dynamicReportId"
                        [dataSelects]="listReportType"
                        [type]="isSubmitted && form.controls['dynamicReportId'].errors ? 'error' : 'default'"
                        [showError]="isSubmitted && form.controls['dynamicReportId'].errors !== null"
                        [errors]="form.controls['dynamicReportId'].errors"
                        [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'hrm.staffManager.exportReport.label.reportType' | translate }}]"
                        labelText="{{'hrm.staffManager.exportReport.label.reportType' | translate}} <span class='label__required'>*</span>"
                        placeholder="{{'hrm.staffManager.exportReport.label.reportType' | translate}}"
            >
            </hbt-select>
          </div>
          <div nz-col nzXs="24" nzLg="8">
            <tree-data-picker
            [isExpand]="true"
              formControlName="organizationId"
              [scope]="scope"
              [functionCode]="functionCode"
              labelText="{{'hrm.staffManager.exportReport.label.organization' | translate}}"
              placeholder="{{'hrm.staffManager.exportReport.label.organization' | translate}}"
            >
            </tree-data-picker>
          </div>
          <div nz-col nzXs="24" nzLg="8">
            <hbt-select-check-able formControlName="empTypeIds"
                                   [urlLoadData]="urlLoadObject"
                                   [serviceName]="serviceName"
                                   [showAction]="false"
                                   keyLabel="name"
                                   keyValue="empTypeId"
                                   labelText="{{'hrm.staffManager.exportReport.label.object' | translate}}"
                                   placeholder="{{'hrm.staffManager.exportReport.label.object' | translate}}">
            </hbt-select-check-able>
          </div>
          <div nz-col nzXs="24" nzLg="8">
            <hbt-select formControlName="typeReportPeriod"
                        [dataSelects]="listTypeReportPeriod"
                        [type]="isSubmitted && form.controls['typeReportPeriod'].errors ? 'error' : 'default'"
                        [showError]="isSubmitted && form.controls['typeReportPeriod'].errors !== null"
                        [errors]="form.controls['typeReportPeriod'].errors"
                        [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'hrm.staffManager.exportReport.label.typeReportPeriod' | translate }}]"
                        labelText="{{'hrm.staffManager.exportReport.label.typeReportPeriod' | translate}} <span class='label__required'>*</span>"
                        placeholder="{{'hrm.staffManager.exportReport.label.typeReportPeriod' | translate}} "
                        (ngModelChange)="periodChange($event)"
            >
            </hbt-select>
          </div>
          <div nz-col nzXs="24" nzLg="8" *ngIf="periodType == 'PERIOD'">
            <hbt-date-picker
              formControlName="startDate"
              [type]="isSubmitted && form.controls['startDate'].errors ? 'error' : 'default'"
              [showError]="isSubmitted && form.controls['startDate'].errors !== null"
              [errors]="form.controls['startDate'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'hrm.staffManager.exportReport.label.startDate' | translate }}]"
              labelText="{{ 'hrm.staffManager.exportReport.label.startDate' | translate }} <span class='label__required'>*</span>"
              placeholderText="{{ 'hrm.staffManager.exportReport.label.startDate' | translate }}"
            ></hbt-date-picker>
          </div>
          <div nz-col nzXs="24" nzLg="8" *ngIf="periodType == 'PERIOD'">
            <hbt-date-picker
              formControlName="endDate"
              [type]="isSubmitted && (form.controls['endDate'].errors || form.errors?.rangeDateError) ? 'error' : 'default'"
              [showError]="isSubmitted && (form.controls['endDate'].errors || form.errors?.rangeDateError) !== null"
              [errors]="form.errors?.rangeDateError ? form.errors : form.controls['endDate'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'hrm.staffManager.exportReport.label.endDate' | translate }},
              { errorName: 'rangeDateError', errorDescription: 'hrm.validate.rangeDate.pareDateMore' | translate:{'fromDate': 'hrm.staffManager.exportReport.label.startDate' | translate, 'toDate': 'hrm.staffManager.exportReport.label.endDate' | translate}}]"
              labelText="{{ 'hrm.staffManager.exportReport.label.endDate' | translate }} <span class='label__required'>*</span>"
              placeholderText="{{ 'hrm.staffManager.exportReport.label.endDate' | translate }}"
            ></hbt-date-picker>
          </div>
          <div nz-col nzXs="24" nzLg="8" *ngIf="periodType == 'MONTH'">
            <hbt-date-picker
              formControlName="month"
              mode="month"
              [type]="isSubmitted && form.controls['month'].errors ? 'error' : 'default'"
              [showError]="isSubmitted && form.controls['month'].errors !== null"
              [errors]="form.controls['month'].errors"
              [errorDefs]="[{ errorName: 'required', errorDescription: 'common.validate.required' | translate: {'param': 'hrm.staffManager.exportReport.label.month' | translate }}]"
              labelText="{{ 'hrm.staffManager.exportReport.label.month' | translate }} <span class='label__required'>*</span>"
              placeholderText="{{ 'hrm.staffManager.exportReport.label.month' | translate }}"
            ></hbt-date-picker>
          </div>
          <div nz-col nzXs="24" nzLg="24">
            <div style="text-align: center">
              <hbt-button
                class="staff__research__btn__search"
                buttonSize="MEDIUM"
                buttonAvailableStyle="SEARCH"
                buttonText="{{'common.button.export' | translate}}"
                (click)="export()"
              ></hbt-button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
